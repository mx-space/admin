(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4709cfb2"],{"2ef1":function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),o.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("PageLayout",{scopedSlots:t._u([{key:"header",fn:function(){return[o("layout-button",{attrs:{backcolor:"#41B883",icon:["far","save"],name:"发布一言"},nativeOn:{click:function(e){return t.handlePostHitokoto(e)}}}),o("layout-button",{attrs:{icon:["fab","telegram-plane"],name:t.$route.query.id?"更新":"发布"},nativeOn:{click:function(e){return t.handleSubmit(e)}}})]},proxy:!0}])},[o("el-form",{ref:"form",attrs:{model:t.model,"label-width":"80px",rules:t.rules}},[o("el-form-item",{attrs:{label:"内容",prop:"text",required:""}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:8},placeholder:t.placeholder.text},model:{value:t.model.text,callback:function(e){t.$set(t.model,"text",e)},expression:"model.text"}})],1),o("el-form-item",{attrs:{label:"作者",prop:"author"}},[o("el-input",{attrs:{placeholder:t.placeholder.author,"auto-complete":"off"},model:{value:t.model.author,callback:function(e){t.$set(t.model,"author",e)},expression:"model.author"}})],1),o("el-form-item",{attrs:{label:"来源",prop:"source"}},[o("el-input",{attrs:{placement:t.placeholder.source,"auto-complete":"off"},model:{value:t.model.source,callback:function(e){t.$set(t.model,"source",e)},expression:"model.source"}})],1)],1)],1)},i=[]},"528f":function(t,e,o){"use strict";var r=o("7a5d"),i=o.n(r);i.a},"5b1c":function(t,e,o){"use strict";o.r(e);var r=o("2ef1"),i=o("9c01");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);var n=o("2877"),s=Object(n["a"])(i["default"],r["a"],r["b"],!1,null,null,null);e["default"]=s.exports},"71ac":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},["mobile"!==t.device?o("div",{staticClass:"btn",style:{background:t.backcolor,color:t.forecolor}},[o("div",{staticClass:"name"},[o("div",{},[t._v(t._s(t.name))])]),o("div",{staticClass:"icon",style:{background:t.backcolor}},[o("icon",{attrs:{icon:t.icon}})],1)]):o("div",[o("button",{style:{background:t.backcolor,color:t.forecolor}},[o("icon",{attrs:{icon:t.icon}})],1)])])},i=[],a=o("2f62"),n={props:{icon:{type:Array,required:!0},name:{type:String,required:!0},backcolor:{type:String,default:"#1188e8"},forecolor:String},computed:{...Object(a["mapGetters"])(["device"])}},s=n,l=(o("528f"),o("2877")),u=Object(l["a"])(s,r,i,!1,null,"8b036e9c",null);e["default"]=u.exports},"7a5d":function(t,e,o){},"9c01":function(t,e,o){"use strict";o.r(e);var r=o("f17a"),i=o.n(r);for(var a in r)"default"!==a&&function(t){o.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},f17a:function(t,e,o){"use strict";o("ddb0"),Object.defineProperty(e,"__esModule",{value:!0});const r=o("9ab4"),i=r.__importDefault(o("2b0e")),a=r.__importDefault(o("2fe1")),n=r.__importDefault(o("45eb")),s=r.__importDefault(o("71ac")),l=o("d257");let u=class extends i.default{constructor(){super(...arguments),this.model={source:"",text:"",author:""},this.placeholder={text:"",author:"",source:""},this.rules={text:[{required:!0,message:"请输入正文",trigger:"blur"}]}}created(){return r.__awaiter(this,void 0,void 0,(function*(){if(yield this.getHitokoto(),!this.id)return;const{data:t}=yield this.$api("Say").get(this.$route.query.id);this.model=t}))}getHitokoto(){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch("https://v1.hitokoto.cn/"),e=yield t.json();this.placeholder={source:e.from,text:e.hitokoto,author:e.from_who||e.creator}}))}handlePostHitokoto(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.$api("Say").post(l.emptyString2Undefined(this.placeholder)),this.$message.success("发送成功~"),this.$router.push({name:"say-list"})}))}handleSubmit(){return r.__awaiter(this,void 0,void 0,(function*(){this.$refs["form"].validate(t=>r.__awaiter(this,void 0,void 0,(function*(){t&&(this.id?(yield this.$api("Say").update(this.id,l.emptyString2Undefined(this.model)),this.$message.success("修改成功~")):(yield this.$api("Say").post(l.emptyString2Undefined(this.model)),this.$message.success("发送成功~")),this.$router.push({name:"say-list"}))})))}))}get id(){return this.$route.query.id}};u=r.__decorate([a.default({components:{PageLayout:n.default,LayoutButton:s.default}})],u),e.default=u}}]);